 
 <!--
 	(c) Copyright 2020 lu. All Rights Reserved. 
 	作者: 路  1270123648@qq.com
 -->
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<script src="js/jquery-3.3.1.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="css/pager.css" />
		<link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css">
		<script src="js/pager.js">
		</script>
		<title></title>
		<style type="text/css">
			html {
				height: 100%;
			}
			
			body {
				height: 100%;
				background-color: #DDD;
				padding: 0;
				margin: 0;
				padding-top: 10px;
			}
			
			.font,
			.ssk {
				margin-left: 10px;
				margin-right: 10px;
			}
			
			.lua {
				padding-top: 10px;
				margin-top: 15px;
			}
			
			.wc {
				color: red;
			}
			
			.modal-body {
				padding: 10%;
			}
			.modal-body div{
				padding-bottom: 3%;
			}
			
			.hide {
				display: none;
			}
		</style>
	</head>

	<body class="container-fluid">
		<div class="lua">
			<h5 class="font text-dark float-left font-weight-bold">村镇人员信息</h5>
			<button type="button" class="btn btn-outline-dark" data-toggle="modal" data-target="#myModal">添加村委会</button>
			<!-- 模态框 -->
			<div class="modal fade" id="myModal">
				<div class="modal-dialog">
					<div class="modal-content">
						<form action="" method="post">
							<!-- 模态框头部 -->
							<div class="modal-header">
								<h4 class="modal-title text-center w-100">添加村委会</h4>
								<button type="button" class="close" data-dismiss="modal">&times;</button>
							</div>

							<!-- 模态框主体 -->
							<!-- 模态框主体 -->
							<div class="modal-body">
								<div class="form-inline">
									<label for="name">名称:</label>
									<input type="text" class="form-control" id="name" name="name" maxlength="15" placeholder="name">
									<label for="name" class="wc"></label>
								</div>
								<div class="form-inline top">
									<label for="phone">电话:</label>
									<input type="number" class="form-control" id="phone" name="phone" placeholder="联系电话">
									<label for="phone" class="wc"></label>
								</div>
								<div class="form-inline top">
									<label for="address">地址:</label>
									<input type="text" class="form-control" id="address" placeholder="所在地址">
									<label for="address" class="wc"></label>
								</div>

							</div>

							<!-- 模态框底部 -->
							<div class="modal-footer">
								<button type="button" class="btn btn-success" id="qr">确定</button>
								<button type="button" class="btn btn-danger" data-dismiss="modal">关闭</button>
							</div>
						</form>
					</div>
				</div>
			</div>

			<div class="ssk input-group mb-3 input-group-sm w-25 float-right">
				<input type="text" class="form-control" placeholder="输入名字">
				<div class="input-group-append">
					<button class="btn btn-success" type="submit">搜素</button>
				</div>
			</div>
		</div>
		<div class="clearfix"></div>
		<div class="center">
			<table class="table table-striped table-hover text-center">
				<thead class="thead-secondary">
					<tr>
						<th>名称</th>
						<th>电话</th>
						<th>位置</th>
						<th>操作</th>
					</tr>
				</thead>
				<tbody>
					<tr class="yd">
						<td class="ycwh">**村委会</td>
						<td class="yphone">135888877866</td>
						<td class="yaddress">风穴寺广成东路18号</td>
						<td>
							<a href="committeeA.html" class="btn btn-info">查看</a>
							<button class="btn btn-info modify">修改</button>
						</td>
						<td class="hide inhide">
							<input type="button" id="" class="btn btn-success queren" value="确认" />
						</td>
					</tr>
					<tr class="yd">
						<td class="ycwh">**村委会</td>
						<td class="yphone">135888877866</td>
						<td class="yaddress">风穴寺广成东路18号</td>
						<td>
							<a href="committeeA.html" class="btn btn-info">查看</a>
							<button class="btn btn-info modify">修改</button>
						</td>
						<td class="hide inhide">
							<input type="button" id="" class="btn btn-success queren" value="确认" />
						</td>
					</tr>
				</tbody>
			</table>
		</div>

		<script>
			$(".modify").click(function() {
				//修改
				$(this).parent().siblings(".hide").removeClass("hide");
				$(this).parent().attr("class", "hide");
				var $mima = $(this).parents().prevAll(".ycwh"),
					$jibie = $(this).parents().prevAll(".yphone"),
					$beizhu = $(this).parents().prevAll(".yaddress");
				var mima = $mima.text(),
					jibie = $jibie.text(),
					beizhu = $beizhu.text();
				$mima.html(' <input  class="editt form-control mm"  type="text" value="' + mima + '"/>');
				$jibie.html(" <input type='number' class='editt form-control jb' name='phone' value='" + jibie + "'>");
				$beizhu.html('<input  class="editt form-control bz"  type="text" value="' + beizhu + '"/> ');
			})
			// 确认
			$(".queren").click(function() {
				$(this).parent().siblings(".hide").removeClass("hide");
				$(this).parent().attr("class", "hide");
				var $mima = $(this).parents().prevAll(".ycwh"),
					$jibie = $(this).parents().prevAll(".yphone"),
					$beizhu = $(this).parents().prevAll(".yaddress");
				//  提交 修改
				$mima.html($mima.children().val());
				$jibie.html($jibie.children().val());
				$beizhu.html($beizhu.children().val());
			})
			//  验证名称
			function isChinaName() {
				var pattern = /^[\u4E00-\u9FA5]{1,15}$/;

				if($.trim($('#name').val()).length == 0) {
					$('#name').parent().find(".wc").addClass("fa fa-close").text("名称没有输入");
				} else if(pattern.test($.trim($('#name').val())) == false) {
					$('#name').parent().find(".wc").addClass("fa fa-close").text("名称输入错误");
				} else {
					$('#name').parent().find(".wc").removeClass("fa fa-close").text("");
				}
			}
			// 判断手机号码
			function isPhoneNo() {
				var pattern = /^1[34578]\d{9}$/;
				if($.trim($('#phone').val()).length == 0) {
					$('#phone').parent().find(".wc").addClass("fa fa-close").text("手机号没有输入");
				} else if(pattern.test($.trim($('#phone').val())) == false) {
					$('#phone').parent().find(".wc").addClass("fa fa-close").text("手机号码不正确");

				} else {
					$('#phone').parent().find(".wc").removeClass("fa fa-close").text("");
				}
			}

			//判断地址
			function isdz() {
				if($.trim($('#name').val()) == null || $.trim($('#name').val()).trim() == "" ) {
					$('#name').parent().find(".wc").addClass("fa fa-close").text("地址没有输入");
				}else if($("#address").val().length > 50) {
					$('#address').parent().find(".wc").addClass("fa fa-close").text("地址描述过长");
				} else {
					$('#address').parent().find(".wc").removeClass("fa fa-close").text("");
				}
			}
			$("#name").blur(isChinaName);
			$("#phone").blur(isPhoneNo);
			$("#address").blur(isdz);
			$("#qr").click(function() {
				isChinaName();
				isPhoneNo();
				isdz();
				var x = 0;
				$(".wc").each(function(index) {
					if($(".wc:eq(" + [index] + ")").text() != "") {
						x++;
					}
				})

				if(x == 0) {
					$("form").submit();
				} else {
					alert("填写的有误,请确认后 提交");
				}

			})
		</script>
	</body>

</html>